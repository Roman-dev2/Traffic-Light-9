{"ast":null,"code":"var _jsxFileName = \"D:\\\\Navchania\\\\Webka2.0\\\\Labki\\\\web-laba7-Roman-dev2\\\\traffic-lights-7\\\\src\\\\Light.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { motion } from 'framer-motion';\nimport './Light.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Light({\n  tlColor = 'red',\n  onClick,\n  settings = {\n    duration: 300,\n    brightness: 0.5,\n    blinks: 3\n  }\n}) {\n  _s();\n  const [isBlinking, setIsBlinking] = useState(false);\n  const [blinkKey, setBlinkKey] = useState(0);\n  const handleBlink = useCallback(() => {\n    onClick(tlColor);\n    setIsBlinking(true);\n    const timer = setTimeout(() => {\n      setIsBlinking(false);\n      setBlinkKey(prevKey => prevKey + 1);\n    }, settings.duration * settings.blinks);\n    return () => clearTimeout(timer); // Правильно очищаємо таймер\n  }, [tlColor, onClick, settings.duration, settings.blinks]); // Залежності useCallback\n\n  useEffect(() => {\n    return () => {\n      handleBlink(); // Це викликається для очищення таймера при демонтажі компонента\n    };\n  }, [handleBlink]); // handleBlink тепер є залежністю useEffect\n\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"light\",\n    onClick: handleBlink,\n    style: {\n      backgroundColor: tlColor,\n      width: '100px',\n      height: '100px',\n      borderRadius: '50%'\n    },\n    animate: {\n      opacity: isBlinking ? settings.brightness : 1\n    },\n    transition: {\n      duration: settings.duration / 1000,\n      repeat: settings.blinks,\n      repeatType: \"reverse\"\n    }\n  }, blinkKey, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 9\n  }, this);\n}\n_s(Light, \"nz8w81fTOvXXRpl30/qBeCKXG6I=\");\n_c = Light;\nLight.propTypes = {\n  tlColor: PropTypes.string,\n  onClick: PropTypes.func.isRequired,\n  settings: PropTypes.shape({\n    duration: PropTypes.number,\n    brightness: PropTypes.number,\n    blinks: PropTypes.number\n  }).isRequired\n};\nexport default Light;\nvar _c;\n$RefreshReg$(_c, \"Light\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","PropTypes","motion","jsxDEV","_jsxDEV","Light","tlColor","onClick","settings","duration","brightness","blinks","_s","isBlinking","setIsBlinking","blinkKey","setBlinkKey","handleBlink","timer","setTimeout","prevKey","clearTimeout","div","className","style","backgroundColor","width","height","borderRadius","animate","opacity","transition","repeat","repeatType","fileName","_jsxFileName","lineNumber","columnNumber","_c","propTypes","string","func","isRequired","shape","number","$RefreshReg$"],"sources":["D:/Navchania/Webka2.0/Labki/web-laba7-Roman-dev2/traffic-lights-7/src/Light.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { motion } from 'framer-motion';\r\nimport './Light.css';\r\n\r\nfunction Light({ tlColor = 'red', onClick, settings = { duration: 300, brightness: 0.5, blinks: 3 } }) {\r\n    const [isBlinking, setIsBlinking] = useState(false);\r\n    const [blinkKey, setBlinkKey] = useState(0);\r\n\r\n    const handleBlink = useCallback(() => {\r\n        onClick(tlColor);\r\n        setIsBlinking(true);\r\n        const timer = setTimeout(() => {\r\n            setIsBlinking(false);\r\n            setBlinkKey(prevKey => prevKey + 1);\r\n        }, settings.duration * settings.blinks);\r\n        return () => clearTimeout(timer);  // Правильно очищаємо таймер\r\n    }, [tlColor, onClick, settings.duration, settings.blinks]);  // Залежності useCallback\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            handleBlink();  // Це викликається для очищення таймера при демонтажі компонента\r\n        };\r\n    }, [handleBlink]);  // handleBlink тепер є залежністю useEffect\r\n\r\n    return (\r\n        <motion.div\r\n            key={blinkKey}\r\n            className=\"light\"\r\n            onClick={handleBlink}\r\n            style={{\r\n                backgroundColor: tlColor,\r\n                width: '100px',\r\n                height: '100px',\r\n                borderRadius: '50%'\r\n            }}\r\n            animate={{ opacity: isBlinking ? settings.brightness : 1 }}\r\n            transition={{ duration: settings.duration / 1000, repeat: settings.blinks, repeatType: \"reverse\" }}\r\n        />\r\n    );\r\n}\r\n\r\nLight.propTypes = {\r\n    tlColor: PropTypes.string,\r\n    onClick: PropTypes.func.isRequired,\r\n    settings: PropTypes.shape({\r\n        duration: PropTypes.number,\r\n        brightness: PropTypes.number,\r\n        blinks: PropTypes.number\r\n    }).isRequired\r\n};\r\n\r\nexport default Light;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAC/D,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAO,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErB,SAASC,KAAKA,CAAC;EAAEC,OAAO,GAAG,KAAK;EAAEC,OAAO;EAAEC,QAAQ,GAAG;IAAEC,QAAQ,EAAE,GAAG;IAAEC,UAAU,EAAE,GAAG;IAAEC,MAAM,EAAE;EAAE;AAAE,CAAC,EAAE;EAAAC,EAAA;EACnG,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACiB,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC,CAAC,CAAC;EAE3C,MAAMmB,WAAW,GAAGlB,WAAW,CAAC,MAAM;IAClCQ,OAAO,CAACD,OAAO,CAAC;IAChBQ,aAAa,CAAC,IAAI,CAAC;IACnB,MAAMI,KAAK,GAAGC,UAAU,CAAC,MAAM;MAC3BL,aAAa,CAAC,KAAK,CAAC;MACpBE,WAAW,CAACI,OAAO,IAAIA,OAAO,GAAG,CAAC,CAAC;IACvC,CAAC,EAAEZ,QAAQ,CAACC,QAAQ,GAAGD,QAAQ,CAACG,MAAM,CAAC;IACvC,OAAO,MAAMU,YAAY,CAACH,KAAK,CAAC,CAAC,CAAE;EACvC,CAAC,EAAE,CAACZ,OAAO,EAAEC,OAAO,EAAEC,QAAQ,CAACC,QAAQ,EAAED,QAAQ,CAACG,MAAM,CAAC,CAAC,CAAC,CAAE;;EAE7DX,SAAS,CAAC,MAAM;IACZ,OAAO,MAAM;MACTiB,WAAW,CAAC,CAAC,CAAC,CAAE;IACpB,CAAC;EACL,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC,CAAC,CAAE;;EAEpB,oBACIb,OAAA,CAACF,MAAM,CAACoB,GAAG;IAEPC,SAAS,EAAC,OAAO;IACjBhB,OAAO,EAAEU,WAAY;IACrBO,KAAK,EAAE;MACHC,eAAe,EAAEnB,OAAO;MACxBoB,KAAK,EAAE,OAAO;MACdC,MAAM,EAAE,OAAO;MACfC,YAAY,EAAE;IAClB,CAAE;IACFC,OAAO,EAAE;MAAEC,OAAO,EAAEjB,UAAU,GAAGL,QAAQ,CAACE,UAAU,GAAG;IAAE,CAAE;IAC3DqB,UAAU,EAAE;MAAEtB,QAAQ,EAAED,QAAQ,CAACC,QAAQ,GAAG,IAAI;MAAEuB,MAAM,EAAExB,QAAQ,CAACG,MAAM;MAAEsB,UAAU,EAAE;IAAU;EAAE,GAV9FlB,QAAQ;IAAAmB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAWhB,CAAC;AAEV;AAACzB,EAAA,CAnCQP,KAAK;AAAAiC,EAAA,GAALjC,KAAK;AAqCdA,KAAK,CAACkC,SAAS,GAAG;EACdjC,OAAO,EAAEL,SAAS,CAACuC,MAAM;EACzBjC,OAAO,EAAEN,SAAS,CAACwC,IAAI,CAACC,UAAU;EAClClC,QAAQ,EAAEP,SAAS,CAAC0C,KAAK,CAAC;IACtBlC,QAAQ,EAAER,SAAS,CAAC2C,MAAM;IAC1BlC,UAAU,EAAET,SAAS,CAAC2C,MAAM;IAC5BjC,MAAM,EAAEV,SAAS,CAAC2C;EACtB,CAAC,CAAC,CAACF;AACP,CAAC;AAED,eAAerC,KAAK;AAAC,IAAAiC,EAAA;AAAAO,YAAA,CAAAP,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}